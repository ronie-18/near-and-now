import{b as Ke,r as m,u as et,L as S}from"./vendor-BZu7OeTY.js";import{L as tt,S as J,a as Le,C as st,U as re,T as se,b as rt,c as ye,d as at,e as ot,f as lt,M as nt,g as ae,B as it,h as dt,i as Te,R as oe,D as ct,P as B,j as ee,k as ue,l as pe,A as te,m as le,X as R,n as fe,o as be,p as Me,q as je,r as mt,s as xt,F as we,t as gt,G as ht,u as Ne,v as ve,w as ut,x as pt,y as ft,z as bt,E as V,H as Ie,I as Re,J as Se,K as Fe,N as Ue,O as yt,Q as qe,V as jt,W as Pe,Y as wt,Z as Nt,_ as vt,$ as St}from"./ui-c-BOW0Sq.js";import{c as Be}from"./supabase-CECfXeoe.js";var ce={exports:{}},Z={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e;function _t(){if($e)return Z;$e=1;var t=Ke(),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function n(d,h,y){var b,x={},p=null,g=null;y!==void 0&&(p=""+y),h.key!==void 0&&(p=""+h.key),h.ref!==void 0&&(g=h.ref);for(b in h)a.call(h,b)&&!l.hasOwnProperty(b)&&(x[b]=h[b]);if(d&&d.defaultProps)for(b in h=d.defaultProps,h)x[b]===void 0&&(x[b]=h[b]);return{$$typeof:s,type:d,key:p,ref:g,props:x,_owner:o.current}}return Z.Fragment=r,Z.jsx=n,Z.jsxs=n,Z}var ze;function Ct(){return ze||(ze=1,ce.exports=_t()),ce.exports}var e=Ct();const Je="https://mpbszymyubxavjoxhzfm.supabase.co",kt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wYnN6eW15dWJ4YXZqb3hoemZtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQyOTc5OTQsImV4cCI6MjA2OTg3Mzk5NH0.NnHFwGCkNpTWorV8O6vgn6uuqYPRek1QK4Sk_rcqLOg",Et="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wYnN6eW15dWJ4YXZqb3hoemZtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1NDI5Nzk5NCwiZXhwIjoyMDY5ODczOTk0fQ.a2qiA6LIIDkxO6YDxUyOzansgdop_oNQgp0uLBUF8vA",N=Be(Je,kt),I=Be(Je,Et,{auth:{autoRefreshToken:!1,persistSession:!1}});async function os(){try{console.log("ðŸ”„ Fetching products from Supabase...");let t=[],s=0;const r=1e3;let a=!0;for(;a;){const{data:o,error:l}=await N.from("products").select("*").eq("in_stock",!0).order("created_at",{ascending:!1}).range(s,s+r-1);if(l)throw console.error("âŒ Supabase error:",l),new Error(`Database error: ${l.message}`);o&&o.length>0?(t=[...t,...o],s+=r,a=o.length===r):a=!1}return console.log(`âœ… Successfully fetched ${t.length} products`),_e(t)}catch(t){throw console.error("âŒ Error in getAllProducts:",t),t}}async function ls(t){try{console.log("ðŸ”Ž getProductsByCategory - Querying for category:",t);let s=[],r=0;const a=1e3;let o=!0;for(;o;){const{data:n,error:d}=await N.from("products").select("*").eq("category",t).eq("in_stock",!0).order("rating",{ascending:!1}).range(r,r+a-1);if(d)return console.error("âŒ Error fetching products by category:",d),[];n&&n.length>0?(s=[...s,...n],r+=a,o=n.length===a):o=!1}console.log("âœ… getProductsByCategory - Raw data from DB:",s.length,"products");const l=_e(s);return console.log("âœ… getProductsByCategory - Transformed products:",l.length),l}catch(s){return console.error("Error in getProductsByCategory:",s),[]}}async function ns(t){try{const{data:s,error:r}=await N.from("products").select("*").eq("in_stock",!0).ilike("name",`%${t}%`);return r?(console.error("Error searching products:",r),[]):_e(s||[])}catch(s){return console.error("Error in searchProducts:",s),[]}}function _e(t){return t.map(s=>({...s,price:typeof s.price=="string"?parseFloat(s.price):s.price,image:s.image_url||s.image}))}async function is(t){try{const{data:s,error:r}=await N.auth.signInWithOtp({phone:t});if(r)throw r;return s}catch(s){throw console.error("Error sending OTP:",s),s}}async function ds(t,s){try{const{data:r,error:a}=await N.auth.verifyOtp({phone:t,token:s,type:"sms"});if(a)throw a;return r}catch(r){throw console.error("Error verifying OTP:",r),r}}async function cs(){try{const{data:{user:t}}=await N.auth.getUser();return t}catch(t){return console.error("Error getting current user:",t),null}}async function ms(){try{const{error:t}=await N.auth.signOut();if(t)throw t}catch(t){throw console.error("Error logging out:",t),t}}async function Ot(){try{const t=new Date,s=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=`NN${`${s}${r}${a}`}`,{data:n,error:d}=await N.rpc("generate_next_order_number",{date_prefix:l});if(d)throw console.error("Error generating order number via RPC:",d),new Error(`Failed to generate order number: ${d.message}`);if(!n||typeof n!="string")throw new Error("Invalid response from order number generator");return n}catch(t){throw console.error("Error generating order number:",t),t}}async function xs(t){try{console.log("ðŸ›’ Creating order...",t);const s=await Ot();console.log("ðŸ“ Generated order number:",s);const r={user_id:t.user_id||null,customer_name:t.customer_name,customer_email:t.customer_email||null,customer_phone:t.customer_phone,order_status:t.order_status,payment_status:t.payment_status,payment_method:t.payment_method,order_total:t.order_total,subtotal:t.subtotal,delivery_fee:t.delivery_fee,items:t.items,shipping_address:t.shipping_address,order_number:s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:a,error:o}=await N.from("orders").insert([r]).select().single();if(o)throw console.error("âŒ Error creating order:",o),new Error(`Failed to create order: ${o.message}`);return console.log("âœ… Order created successfully:",a),{...a,items_count:a.items?.length||0}}catch(s){throw console.error("âŒ Error in createOrder:",s),s}}async function gs(t,s,r){try{console.log("ðŸ“¦ Fetching orders for user:",t,"phone:",s,"email:",r);const a=[];if(t&&a.push(N.from("orders").select("*").eq("user_id",t)),s&&a.push(N.from("orders").select("*").eq("customer_phone",s)),r&&a.push(N.from("orders").select("*").eq("customer_email",r)),a.length>0){const o=await Promise.all(a),l=[],n=new Set;for(const d of o){if(d.error){console.warn("âš ï¸ Error in one of the order queries:",d.error);continue}if(d.data)for(const h of d.data)n.has(h.id)||(n.add(h.id),l.push(h))}return l.sort((d,h)=>{const y=new Date(d.created_at).getTime();return new Date(h.created_at).getTime()-y}),console.log(`âœ… Fetched ${l.length} orders for user (including matches by phone/email)`),l.map(d=>({...d,items_count:d.items?.length||0}))}else{if(!(t&&typeof t=="string"&&t.trim()!==""))return console.warn("âš ï¸ No valid user identifier provided for order query (userId, phone, or email)"),[];const{data:l,error:n}=await N.from("orders").select("*").eq("user_id",t).order("created_at",{ascending:!1});return n?(console.warn("âš ï¸ Error fetching user orders:",n),[]):(console.log(`âœ… Fetched ${l?.length||0} orders for user`),(l||[]).map(d=>({...d,items_count:d.items?.length||0})))}}catch(a){throw console.error("âŒ Error in getUserOrders:",a),a}}async function hs(t){try{if(console.log("ðŸ“§ Subscribing email to newsletter:",t),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error("Please enter a valid email address");const{data:r}=await N.from("newsletter_subscriptions").select("*").eq("email",t.toLowerCase().trim()).single();if(r){if(r.is_active)return console.log("âœ… Email already subscribed"),r;const{data:l,error:n}=await N.from("newsletter_subscriptions").update({is_active:!0,subscribed_at:new Date().toISOString()}).eq("email",t.toLowerCase().trim()).select().single();if(n)throw new Error(`Failed to resubscribe: ${n.message}`);return console.log("âœ… Email resubscribed successfully"),l}const{data:a,error:o}=await N.from("newsletter_subscriptions").insert([{email:t.toLowerCase().trim(),is_active:!0,subscribed_at:new Date().toISOString()}]).select().single();if(o)throw console.error("âŒ Error subscribing to newsletter:",o),new Error(`Failed to subscribe: ${o.message}`);return console.log("âœ… Successfully subscribed to newsletter"),a}catch(s){throw console.error("âŒ Error in subscribeToNewsletter:",s),s}}async function us(t){try{console.log("ðŸ“ Fetching addresses for user:",t);const{data:s,error:r}=await N.from("addresses").select("*").eq("user_id",t).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(r)throw console.error("âŒ Error fetching addresses:",r),new Error(`Failed to fetch addresses: ${r.message}`);return console.log(`âœ… Fetched ${s?.length||0} addresses`),s||[]}catch(s){throw console.error("âŒ Error in getUserAddresses:",s),s}}async function ps(t){try{console.log("ðŸ“ Creating new address..."),t.is_default&&await N.from("addresses").update({is_default:!1}).eq("user_id",t.user_id);const{data:s,error:r}=await N.from("addresses").insert([t]).select().single();if(r)throw console.error("âŒ Error creating address:",r),new Error(`Failed to create address: ${r.message}`);return console.log("âœ… Address created successfully"),s}catch(s){throw console.error("âŒ Error in createAddress:",s),s}}async function fs(t,s,r){try{console.log("ðŸ“ Updating address:",t),r.is_default&&await N.from("addresses").update({is_default:!1}).eq("user_id",s).neq("id",t);const{data:a,error:o}=await N.from("addresses").update({...r,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",s).select().single();if(o)throw console.error("âŒ Error updating address:",o),new Error(`Failed to update address: ${o.message}`);return console.log("âœ… Address updated successfully"),a}catch(a){throw console.error("âŒ Error in updateAddress:",a),a}}async function bs(t,s){try{console.log("ðŸ“ Deleting address:",t);const{error:r}=await N.from("addresses").delete().eq("id",t).eq("user_id",s);if(r)throw console.error("âŒ Error deleting address:",r),new Error(`Failed to delete address: ${r.message}`);console.log("âœ… Address deleted successfully")}catch(r){throw console.error("âŒ Error in deleteAddress:",r),r}}async function ys(t,s){try{console.log("ðŸ“ Setting default address:",t),await N.from("addresses").update({is_default:!1}).eq("user_id",s);const{data:r,error:a}=await N.from("addresses").update({is_default:!0,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",s).select().single();if(a)throw console.error("âŒ Error setting default address:",a),new Error(`Failed to set default address: ${a.message}`);return console.log("âœ… Default address updated successfully"),r}catch(r){throw console.error("âŒ Error in setDefaultAddress:",r),r}}const Q="product-images",Ae="https://mpbszymyubxavjoxhzfm.supabase.co";async function js(t){try{const s=t.name.split(".").pop()?.toLowerCase()||"jpg",a=`products/${`${Date.now()}-${Math.random().toString(36).substring(2,15)}.${s}`}`,{data:o,error:l}=await I.storage.from(Q).upload(a,t,{cacheControl:"3600",upsert:!1});if(l){if(console.error("Error uploading image:",l),l.message.includes("Bucket not found")){console.log("Creating storage bucket..."),await I.storage.createBucket(Q,{public:!0,fileSizeLimit:5242880,allowedMimeTypes:["image/jpeg","image/png","image/webp","image/gif"]});const{data:n,error:d}=await I.storage.from(Q).upload(a,t,{cacheControl:"3600",upsert:!1});return d?(console.error("Retry upload failed:",d),null):`${Ae}/storage/v1/object/public/${Q}/${n.path}`}return null}return`${Ae}/storage/v1/object/public/${Q}/${o.path}`}catch(s){return console.error("Error in uploadProductImage:",s),null}}async function Ve(){try{let t=[],s=0;const r=1e3;let a=!0;for(;a;){const{data:o,error:l}=await N.from("products").select("*").order("created_at",{ascending:!1}).range(s,s+r-1);if(l)throw console.error("Error fetching admin products:",l),l;o&&o.length>0?(t=[...t,...o],s+=r,a=o.length===r):a=!1}return t}catch(t){throw console.error("Error in getAdminProducts:",t),t}}async function Pt(t){try{const{data:s,error:r}=await I.from("products").insert([t]).select().single();if(r)throw console.error("Error creating product:",r),r;return s}catch(s){throw console.error("Error in createProduct:",s),s}}async function $t(t,s){try{const{data:r,error:a}=await I.from("products").update(s).eq("id",t).select().single();if(a)throw console.error("Error updating product:",a),a;return r}catch(r){throw console.error("Error in updateProduct:",r),r}}async function zt(t){try{const{error:s}=await I.from("products").delete().eq("id",t);return s?(console.error("Error deleting product:",s),!1):!0}catch(s){return console.error("Error in deleteProduct:",s),!1}}async function Ye(){try{const{data:t,error:s}=await N.from("categories").select("*").order("name");if(s)throw console.error("Error fetching categories:",s),s;return t||[]}catch(t){throw console.error("Error in getCategories:",t),t}}async function ws(t){try{const{data:s,error:r}=await I.from("categories").insert([t]).select().single();if(r)throw console.error("Error creating category:",r),r;return s}catch(s){throw console.error("Error in createCategory:",s),s}}async function Ns(t){try{const{error:s}=await I.from("categories").delete().eq("id",t);return s?(console.error("Error deleting category:",s),!1):!0}catch(s){return console.error("Error in deleteCategory:",s),!1}}async function vs(){try{let t=[],s=0;const r=1e3;let a=!0;for(;a;){const{data:l,error:n}=await N.from("products").select("category").range(s,s+r-1);if(n)throw console.error("Error fetching product counts:",n),n;l&&l.length>0?(t=[...t,...l.map(d=>d.category)],s+=r,a=l.length===r):a=!1}const o={};return t.forEach(l=>{l&&(o[l]=(o[l]||0)+1)}),o}catch(t){return console.error("Error in getProductCountsByCategory:",t),{}}}async function He(){try{const{data:t,error:s}=await N.from("orders").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching orders:",s),s;return(t||[]).map(a=>({...a,items_count:a.items?.length||0}))}catch(t){throw console.error("Error in getOrders:",t),t}}async function At(t,s){try{console.log(`Updating order ${t} to status: ${s}`);const{data:r,error:a}=await I.from("orders").update({order_status:s,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw console.error("Supabase error updating order status:",a),a.message.includes("invalid input value")?new Error(`Status "${s}" is not valid in the database. Please update the database schema to include this status.`):new Error(a.message||"Failed to update order status");return console.log("Order status updated successfully:",r),r}catch(r){throw console.error("Error in updateOrderStatus:",r),r}}async function Dt(){try{const{data:t,error:s}=await N.from("orders").select("customer_name, customer_email, customer_phone, order_total, created_at").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching orders for customers:",s),s;const r=new Map;return t?.forEach(a=>{const o=a.customer_email||a.customer_phone||a.customer_name;if(r.has(o)){const l=r.get(o);l.orders_count+=1,l.total_spent+=a.order_total||0}else r.set(o,{id:o,name:a.customer_name,email:a.customer_email,phone:a.customer_phone,status:"Active",orders_count:1,total_spent:a.order_total||0,created_at:a.created_at,location:""})}),Array.from(r.values())}catch(t){throw console.error("Error in getCustomers:",t),t}}async function Lt(){try{let t=[],s=0;const r=1e3;let a=!0;for(;a;){const{data:j,error:c}=await N.from("products").select("id").range(s,s+r-1);if(c)throw c;j&&j.length>0?(t=[...t,...j],s+=r,a=j.length===r):a=!1}const o=t,{data:l,error:n}=await N.from("orders").select("id, order_status, order_total, customer_email, customer_phone, customer_name");if(n)throw n;const d=new Set;l?.forEach(j=>{const c=j.customer_email||j.customer_phone||j.customer_name;c&&d.add(c)});const h=o?.length||0,y=l?.length||0,b=d.size,x=l?.reduce((j,c)=>j+(c.order_total||0),0)||0,p=l?.filter(j=>j.order_status==="placed").length||0,g=l?.filter(j=>j.order_status==="confirmed").length||0,w=l?.filter(j=>j.order_status==="shipped").length||0,T=l?.filter(j=>j.order_status==="delivered").length||0,$=l?.filter(j=>j.order_status==="cancelled").length||0;return{totalProducts:h,totalOrders:y,totalCustomers:b,totalSales:x,processingOrders:p+g,shippedOrders:w,deliveredOrders:T,cancelledOrders:$}}catch(t){throw console.error("Error fetching dashboard stats:",t),t}}const ne=({children:t})=>{const[s,r]=m.useState(!0),[a,o]=m.useState(!1),[l,n]=m.useState(!1),d=et(),h=()=>{r(!s)},y=()=>{o(!a)},b=()=>{n(!l)},x=p=>d.pathname===p||d.pathname.startsWith(`${p}/`);return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:`bg-white fixed inset-y-0 left-0 z-50 transform transition-all duration-300 ease-in-out shadow-lg
        ${s?"translate-x-0 w-64":"-translate-x-full md:translate-x-0 md:w-20"}`,children:[e.jsx("div",{className:"p-4 border-b border-gray-200 flex items-center justify-center",children:s?e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/Logo.png",alt:"Near & Now",className:"h-10 w-10"}),e.jsx("h1",{className:"ml-3 text-xl font-bold text-primary",children:"Admin Panel"})]}):e.jsx("img",{src:"/Logo.png",alt:"Near & Now",className:"h-10 w-10"})}),e.jsxs("nav",{className:"mt-6 px-4",children:[e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs(S,{to:"/admin",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin")&&!x("/admin/products")&&!x("/admin/orders")&&!x("/admin/customers")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(tt,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Dashboard"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/products",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/products")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(J,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Products"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/categories",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/categories")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Le,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Categories"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/orders",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/orders")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(st,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Orders"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/customers",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/customers")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(re,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Customers"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/delivery",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/delivery")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(se,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Delivery"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/offers",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/offers")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(rt,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Offers"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/reports",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/reports")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ye,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Reports"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/admins",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/admins")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(at,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Admin Management"})]})}),e.jsx("li",{children:e.jsxs(S,{to:"/admin/settings",className:`flex items-center p-3 rounded-lg transition-colors ${x("/admin/settings")?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ot,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Settings"})]})})]}),e.jsx("div",{className:"mt-10 pt-6 border-t border-gray-200",children:e.jsxs(S,{to:"/admin/login",className:"flex items-center p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(lt,{className:"h-5 w-5 mr-3"}),s&&e.jsx("span",{children:"Logout"})]})})]})]}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${s?"md:ml-64":"md:ml-20"}`,children:[e.jsx("header",{className:"bg-white shadow-sm z-10",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:h,className:"p-2 rounded-md text-gray-600 hover:bg-gray-100 focus:outline-none",children:e.jsx(nt,{className:"h-6 w-6"})}),e.jsx("div",{className:"ml-4 hidden md:block",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent w-64"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:b,className:"p-2 rounded-full text-gray-600 hover:bg-gray-100 focus:outline-none relative",children:[e.jsx(it,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 rounded-full bg-red-500"})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-2 z-50 border border-gray-200",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Notifications"})}),e.jsxs("div",{className:"max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"New order received"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Order #12345 has been placed"})]}),e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:"Low stock alert"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Product "Organic Apples" is running low'})]})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:y,className:"flex items-center space-x-2 focus:outline-none",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center",children:e.jsx(dt,{className:"h-5 w-5"})}),e.jsx("span",{className:"hidden md:block text-sm font-medium text-gray-700",children:"Admin User"}),e.jsx(Te,{className:"hidden md:block h-4 w-4 text-gray-500"})]}),a&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50 border border-gray-200",children:[e.jsx(S,{to:"/admin/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile"}),e.jsx(S,{to:"/admin/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Settings"}),e.jsx(S,{to:"/admin/help",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Help"}),e.jsx("div",{className:"border-t border-gray-200 mt-1 pt-1",children:e.jsx(S,{to:"/admin/login",className:"block px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Logout"})})]})]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})},G=({icon:t,gradient:s,label:r,value:a,change:o,changeType:l="positive",href:n})=>{const d=e.jsxs("div",{className:`relative overflow-hidden rounded-2xl ${s} p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 ${n?"cursor-pointer":""}`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-20 h-20 bg-white/10 rounded-full blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e.jsx(t,{className:"w-6 h-6"})}),o&&e.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full backdrop-blur-sm ${l==="positive"?"bg-white/20":"bg-red-400/30"}`,children:[l==="positive"?e.jsx(te,{size:14}):e.jsx(be,{size:14}),o]})]}),e.jsx("p",{className:"text-white/80 text-sm font-medium",children:r}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a})]})]});return n?e.jsx(S,{to:n,children:d}):d},W=({icon:t,label:s,value:r,gradient:a,iconBg:o})=>e.jsx("div",{className:`${a} p-5 rounded-2xl transition-all duration-200 hover:shadow-md`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium opacity-80",children:s}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:r})]}),e.jsx("div",{className:`w-12 h-12 ${o} rounded-xl flex items-center justify-center`,children:e.jsx(t,{className:"w-6 h-6"})})]})}),Tt=({message:t,onDismiss:s})=>e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white px-5 py-4 rounded-xl mb-6 flex items-center shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 font-medium",children:t}),e.jsx("button",{onClick:s,className:"ml-4 p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(R,{size:18})})]}),Mt=()=>e.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-emerald-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-emerald-500 rounded-full animate-spin border-t-transparent"})]}),e.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Loading dashboard..."})]}),It=({data:t})=>{const s=t.reduce((g,w)=>g+w.sales,0),r=t.reduce((g,w)=>g+w.orders,0),a=t.length>0?Math.round(s/t.length):0,o=Math.max(...t.map(g=>g.sales),0),n=(g=>g===0?5e3:g<=1e3?1e3:g<=2e3?2e3:g<=3e3?3e3:g<=4e3?4e3:g<=5e3?5e3:g<=1e4?1e4:g<=2e4?2e4:g<=5e4?5e4:Math.ceil(g/1e4)*1e4)(o),d=[n,Math.round(n*.75),Math.round(n*.5),Math.round(n*.25),0],h=t.slice(0,Math.floor(t.length/2)),y=t.slice(Math.floor(t.length/2)),b=h.reduce((g,w)=>g+w.sales,0),x=y.reduce((g,w)=>g+w.sales,0),p=b>0?(x-b)/b*100:0;return e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl p-4 border border-emerald-100",children:[e.jsx("p",{className:"text-xs text-emerald-600 font-semibold uppercase tracking-wide",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-700 mt-1",children:["â‚¹",s.toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100",children:[e.jsx("p",{className:"text-xs text-blue-600 font-semibold uppercase tracking-wide",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700 mt-1",children:r})]}),e.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-purple-50 rounded-xl p-4 border border-violet-100",children:[e.jsx("p",{className:"text-xs text-violet-600 font-semibold uppercase tracking-wide",children:"Avg. Daily Sales"}),e.jsxs("p",{className:"text-2xl font-bold text-violet-700 mt-1",children:["â‚¹",a.toLocaleString()]})]}),e.jsxs("div",{className:`bg-gradient-to-br ${p>=0?"from-green-50 to-emerald-50 border-green-100":"from-red-50 to-rose-50 border-red-100"} rounded-xl p-4 border`,children:[e.jsx("p",{className:`text-xs ${p>=0?"text-green-600":"text-red-600"} font-semibold uppercase tracking-wide`,children:"Growth"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[p>=0?e.jsx(fe,{className:"w-5 h-5 text-green-600"}):e.jsx(be,{className:"w-5 h-5 text-red-600"}),e.jsxs("p",{className:`text-2xl font-bold ${p>=0?"text-green-700":"text-red-700"}`,children:[p>=0?"+":"",p.toFixed(1),"%"]})]})]})]}),t.length>0?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 overflow-hidden",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"w-16 flex flex-col justify-between text-xs text-gray-500 font-medium pr-2 h-52 flex-shrink-0",children:d.map((g,w)=>e.jsxs("span",{children:["â‚¹",g.toLocaleString()]},w))}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"h-52 border-l-2 border-b-2 border-gray-300 flex items-end px-1",children:t.map((g,w)=>{const $=n>0?g.sales/n*200:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end group min-w-0 px-0.5 h-full",children:[g.sales>0&&e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity mb-1 bg-black text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap z-10",children:["â‚¹",g.sales.toLocaleString()," (",g.orders," orders)"]}),g.sales>0?e.jsx("div",{className:"w-full max-w-[30px] bg-gray-900 hover:bg-gray-700 cursor-pointer transition-colors rounded-t mx-auto",style:{height:`${Math.max($,4)}px`}}):e.jsx("div",{className:"w-full h-0"})]},w)})}),e.jsx("div",{className:"flex mt-2 px-1",children:t.map((g,w)=>e.jsx("div",{className:"flex-1 text-center min-w-0 px-0.5",children:e.jsx("span",{className:"text-[10px] text-gray-500 font-medium truncate block",children:g.date})},w))})]})]})}):e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx(ye,{className:"w-12 h-12 mx-auto"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No order data available"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Orders will appear here once placed"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-900 rounded"}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Daily Revenue"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${p>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[p>=0?e.jsx(fe,{size:12}):e.jsx(be,{size:12}),e.jsxs("span",{className:"text-xs font-semibold",children:[p>=0?"Upward":"Downward"," Trend"]})]})})]})]})},Ss=()=>{const[t,s]=m.useState(!0),[r,a]=m.useState(null),[o,l]=m.useState({totalProducts:0,totalOrders:0,totalCustomers:0,totalSales:0,processingOrders:0,shippedOrders:0,deliveredOrders:0,cancelledOrders:0}),[n,d]=m.useState([]),[h,y]=m.useState([]),[b,x]=m.useState([]),[p,g]=m.useState("7"),[w,T]=m.useState(0),$=async()=>{try{s(!0),a(null);const u=await Lt();l(u);const A=await He();x(A),d(A.slice(0,5));const[i,C]=await Promise.all([Ve(),Ye()]);T(C.length);const P=i.sort(()=>.5-Math.random()).slice(0,5).map(E=>({name:E.name,image:E.image,sold:Math.floor(Math.random()*200)+50,revenue:E.price*(Math.floor(Math.random()*200)+50),stock:Math.floor(Math.random()*100)+20}));y(P)}catch(u){a("Failed to load dashboard data. Please try again."),console.error("Error fetching dashboard data:",u)}finally{s(!1)}};m.useEffect(()=>{$()},[]);const j=m.useMemo(()=>{const u=new Date;u.setHours(23,59,59,999);const A=parseInt(p),i={};if(b&&b.length>0){const E=new Date(u);E.setDate(E.getDate()-A),E.setHours(0,0,0,0),b.forEach(z=>{if(z.order_status==="cancelled")return;const M=new Date(z.created_at);if(M>=E&&M<=u){const D=M.toDateString();i[D]||(i[D]={sales:0,orders:0}),i[D].sales+=z.order_total||0,i[D].orders+=1}})}const C=[],P=A<=7?1:A<=30?3:9;for(let E=A-1;E>=0;E-=P){const z=new Date(u);z.setDate(z.getDate()-E),z.setHours(0,0,0,0);const M=z.toDateString(),D=i[M]||{sales:0,orders:0};C.push({date:z.toLocaleDateString("en-IN",{day:"2-digit",month:"short"}),sales:D.sales,orders:D.orders,dateKey:M})}return C},[b,p]),c=u=>{switch(u){case"delivered":return e.jsx(ue,{className:"w-4 h-4"});case"placed":return e.jsx(ee,{className:"w-4 h-4"});case"confirmed":case"shipped":return e.jsx(se,{className:"w-4 h-4"});case"cancelled":return e.jsx(pe,{className:"w-4 h-4"});default:return e.jsx(ee,{className:"w-4 h-4"})}},_=u=>{switch(u){case"delivered":return"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700";case"placed":return"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700";case"confirmed":return"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700";case"shipped":return"bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700";case"cancelled":return"bg-gradient-to-r from-red-100 to-rose-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=p==="7"?"Last 7 Days":p==="30"?"Last 30 Days":"Last 90 Days";return e.jsx(ne,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Welcome back! Here's what's happening with your store."})]}),e.jsxs("button",{onClick:$,className:"inline-flex items-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors shadow-sm font-medium",children:[e.jsx(oe,{size:18,className:"mr-2"}),"Refresh"]})]}),r&&e.jsx(Tt,{message:r,onDismiss:()=>a(null)}),t?e.jsx(Mt,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-5",children:[e.jsx(G,{icon:ct,gradient:"bg-gradient-to-br from-emerald-500 to-teal-600",label:"Total Sales",value:`â‚¹${o.totalSales.toLocaleString()}`,change:"+12.5%",changeType:"positive"}),e.jsx(G,{icon:B,gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",label:"Total Products",value:o.totalProducts,change:"+5.7%",changeType:"positive",href:"/admin/products"}),e.jsx(G,{icon:Le,gradient:"bg-gradient-to-br from-violet-500 to-purple-600",label:"Total Categories",value:w,change:"+2.1%",changeType:"positive",href:"/admin/categories"}),e.jsx(G,{icon:J,gradient:"bg-gradient-to-br from-amber-500 to-orange-600",label:"Total Orders",value:o.totalOrders,change:"+8.2%",changeType:"positive",href:"/admin/orders"}),e.jsx(G,{icon:re,gradient:"bg-gradient-to-br from-rose-500 to-pink-600",label:"Total Customers",value:o.totalCustomers,change:"+15.3%",changeType:"positive",href:"/admin/customers"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-teal-100 rounded-xl flex items-center justify-center",children:e.jsx(ye,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Sales Overview"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Revenue trends for ",O.toLowerCase()]})]})]}),e.jsx("div",{className:"flex items-center gap-2 bg-gray-100 rounded-xl p-1",children:["7","30","90"].map(u=>e.jsx("button",{onClick:()=>g(u),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${p===u?"bg-white text-emerald-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:u==="7"?"7 Days":u==="30"?"30 Days":"90 Days"},u))})]}),e.jsx(It,{data:j,period:O})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-5",children:"Order Status Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(W,{icon:ee,label:"Processing",value:o.processingOrders,gradient:"bg-gradient-to-br from-blue-50 to-indigo-50 text-blue-800",iconBg:"bg-blue-100 text-blue-600"}),e.jsx(W,{icon:se,label:"Shipped",value:o.shippedOrders,gradient:"bg-gradient-to-br from-amber-50 to-orange-50 text-amber-800",iconBg:"bg-amber-100 text-amber-600"}),e.jsx(W,{icon:ue,label:"Delivered",value:o.deliveredOrders,gradient:"bg-gradient-to-br from-emerald-50 to-teal-50 text-emerald-800",iconBg:"bg-emerald-100 text-emerald-600"}),e.jsx(W,{icon:pe,label:"Cancelled",value:o.cancelledOrders,gradient:"bg-gradient-to-br from-red-50 to-rose-50 text-red-800",iconBg:"bg-red-100 text-red-600"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Recent Orders"}),e.jsxs(S,{to:"/admin/orders",className:"text-sm text-emerald-600 font-semibold hover:text-emerald-700 flex items-center gap-1",children:["View All ",e.jsx(te,{size:14})]})]}),n.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(J,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No orders yet"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:n.map(u=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:e.jsx(B,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-800",children:["#",u.id.substring(0,8)]}),e.jsx("p",{className:"text-sm text-gray-500",children:u.customer_name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-800",children:["â‚¹",u.order_total]}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${_(u.order_status)}`,children:[c(u.order_status),u.order_status.charAt(0).toUpperCase()+u.order_status.slice(1)]})]})]},u.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Top Selling Products"}),e.jsxs(S,{to:"/admin/products",className:"text-sm text-emerald-600 font-semibold hover:text-emerald-700 flex items-center gap-1",children:["View All ",e.jsx(te,{size:14})]})]}),h.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(B,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No products yet"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:h.map((u,A)=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[u.image?e.jsx("img",{src:u.image,alt:u.name,className:"w-12 h-12 rounded-xl object-cover shadow-sm"}):e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-400 to-purple-500 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:u.name.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 line-clamp-1",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u.sold," sold"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-gray-800",children:["â‚¹",u.revenue.toLocaleString()]}),e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium
                            ${u.stock>100?"bg-emerald-100 text-emerald-700":u.stock>50?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:[u.stock," in stock"]})]})]},A))})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-violet-500 to-purple-600 rounded-2xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Want more detailed analytics?"}),e.jsx("p",{className:"text-violet-200 mt-1",children:"Check out the Reports section for in-depth insights"})]}),e.jsxs(S,{to:"/admin/reports",className:"inline-flex items-center px-6 py-3 bg-white text-violet-600 rounded-xl hover:bg-violet-50 transition-colors font-semibold shadow-lg",children:["View Reports",e.jsx(te,{size:18,className:"ml-2"})]})]})})]})]})})},me=10,Ze=t=>t.substring(0,8),Qe=t=>`â‚¹${t.toLocaleString("en-IN")}`,xe=({icon:t,gradient:s,label:r,value:a,subtitle:o,trend:l})=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl ${s} p-5 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-4 -ml-4 w-20 h-20 bg-white/10 rounded-full blur-xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e.jsx(t,{className:"w-6 h-6"})}),l&&e.jsx("span",{className:"text-xs font-medium bg-white/20 px-2 py-1 rounded-full backdrop-blur-sm",children:l})]}),e.jsx("p",{className:"text-white/80 text-sm font-medium",children:r}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a}),o&&e.jsx("p",{className:"text-white/60 text-xs mt-1",children:o})]})]}),Rt=({message:t,onDismiss:s})=>e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white px-5 py-4 rounded-xl mb-6 flex items-center shadow-lg animate-in slide-in-from-top duration-300",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 font-medium",children:t}),e.jsx("button",{onClick:s,className:"ml-4 p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Dismiss",children:e.jsx(R,{size:18})})]}),Ft=({message:t,onDismiss:s})=>e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 text-white px-5 py-4 rounded-xl mb-6 flex items-center shadow-lg animate-in slide-in-from-top duration-300",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 font-medium",children:t}),e.jsx("button",{onClick:s,className:"ml-4 p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Dismiss",children:e.jsx(R,{size:18})})]}),Ut=()=>e.jsxs("div",{className:"p-16 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-emerald-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-emerald-500 rounded-full animate-spin border-t-transparent"})]}),e.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Loading products..."})]}),qt=({searchTerm:t,selectedCategory:s})=>e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsx(B,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:t||s!=="All"?"Try adjusting your search or filters to find what you're looking for.":"Get started by adding your first product to the catalog."}),!t&&s==="All"&&e.jsxs(S,{to:"/admin/products/add",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl hover:from-emerald-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl font-semibold",children:[e.jsx(je,{size:20,className:"mr-2"}),"Add Your First Product"]})]}),Ge=({imageUrl:t,productName:s,size:r="md"})=>{const a={sm:"w-10 h-10 text-xs",md:"w-14 h-14 text-sm",lg:"w-20 h-20 text-base"},[o,l]=m.useState(!1);return t&&!o?e.jsx("img",{src:t,alt:s,className:`${a[r]} object-cover rounded-xl shadow-md ring-2 ring-white`,loading:"lazy",onError:()=>l(!0)}):e.jsx("div",{className:`${a[r]} bg-gradient-to-br from-violet-400 via-purple-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-md ring-2 ring-white`,children:o?e.jsx(yt,{className:"w-1/2 h-1/2 text-white/80"}):e.jsx("span",{className:"font-bold text-white",children:s.substring(0,2).toUpperCase()})})},X=({label:t,field:s,currentSort:r,direction:a,onSort:o})=>e.jsx("th",{className:"px-5 py-4 cursor-pointer group hover:bg-gray-100 transition-colors",onClick:()=>o(s),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:t}),e.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:r===s?a==="asc"?e.jsx(pt,{size:14,className:"text-emerald-500"}):e.jsx(ft,{size:14,className:"text-emerald-500"}):e.jsx(bt,{size:14,className:"text-gray-400"})})]})}),Bt=({isOpen:t,onClose:s,categories:r,onProductAdded:a})=>{const[o,l]=m.useState({name:"",category:"",price:"",in_stock:!0,description:""}),[n,d]=m.useState(!1),[h,y]=m.useState(null),b=async x=>{if(x.preventDefault(),y(null),!o.name.trim()){y("Product name is required");return}if(!o.category){y("Please select a category");return}if(!o.price||parseFloat(o.price)<=0){y("Please enter a valid price");return}try{d(!0),await Pt({name:o.name.trim(),category:o.category,price:parseFloat(o.price),in_stock:o.in_stock,description:o.description.trim()||void 0,image:void 0,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),unit:void 0}),l({name:"",category:"",price:"",in_stock:!0,description:""}),a(),s()}catch(p){console.error("Error creating product:",p),y("Failed to create product. Please try again.")}finally{d(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden animate-in zoom-in-95 duration-200",onClick:x=>x.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx(Me,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Quick Add Product"}),e.jsx("p",{className:"text-emerald-100 text-sm",children:"Add a product in seconds"})]})]}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-xl transition-colors text-white",children:e.jsx(R,{size:20})})]})}),e.jsxs("form",{onSubmit:b,className:"p-6 space-y-5",children:[h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2",children:[e.jsx(le,{size:16}),h]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Product Name *"}),e.jsx("input",{type:"text",placeholder:"e.g., Organic Brown Rice 1kg",value:o.name,onChange:x=>l({...o,name:x.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors text-gray-800",disabled:n})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{value:o.category,onChange:x=>l({...o,category:x.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors text-gray-800",disabled:n,children:[e.jsx("option",{value:"",children:"Select..."}),r.map(x=>e.jsx("option",{value:x.name,children:x.name},x.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Price (â‚¹) *"}),e.jsx("input",{type:"number",placeholder:"0.00",step:"0.01",min:"0",value:o.price,onChange:x=>l({...o,price:x.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors text-gray-800",disabled:n})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{placeholder:"Brief product description...",value:o.description,onChange:x=>l({...o,description:x.target.value}),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors text-gray-800 h-20 resize-none",disabled:n})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Stock Status"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Is this product available?"})]}),e.jsx("button",{type:"button",onClick:()=>l({...o,in_stock:!o.in_stock}),className:`relative w-14 h-8 rounded-full transition-colors ${o.in_stock?"bg-emerald-500":"bg-gray-300"}`,disabled:n,children:e.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${o.in_stock?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-5 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors font-semibold",disabled:n,children:"Cancel"}),e.jsx(S,{to:"/admin/products/add",className:"px-5 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-colors font-semibold text-center",children:"Full Form"}),e.jsx("button",{type:"submit",disabled:n,className:"flex-1 px-5 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl hover:from-emerald-600 hover:to-teal-600 transition-all font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx(V,{size:18,className:"animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{size:18}),"Add Product"]})})]})]})]})}):null},Jt=({product:t,onDelete:s,onToggleStock:r,deleteLoading:a,toggleLoading:o})=>e.jsxs("tr",{className:"group hover:bg-gradient-to-r hover:from-gray-50 hover:to-emerald-50/30 transition-all duration-200",children:[e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"text-xs font-mono text-gray-400 bg-gray-100 px-2 py-1 rounded-lg",children:Ze(t.id)})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ge,{imageUrl:t.image,productName:t.name}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 group-hover:text-emerald-600 transition-colors",children:t.name}),t.description&&e.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:t.description})]})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold bg-gradient-to-r from-violet-100 to-purple-100 text-purple-700",children:t.category})}),e.jsx("td",{className:"px-5 py-4",children:e.jsx("span",{className:"text-lg font-bold text-gray-800",children:Qe(t.price)})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("button",{onClick:()=>r(t.id,t.in_stock),disabled:o===t.id,className:"flex items-center gap-2 group/toggle",children:[o===t.id?e.jsx(V,{size:24,className:"animate-spin text-gray-400"}):t.in_stock?e.jsx(Ie,{size:28,className:"text-emerald-500 group-hover/toggle:text-emerald-600"}):e.jsx(Re,{size:28,className:"text-gray-400 group-hover/toggle:text-gray-500"}),e.jsx("span",{className:`text-sm font-medium ${t.in_stock?"text-emerald-600":"text-gray-500"}`,children:t.in_stock?"In Stock":"Out of Stock"})]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold
        ${t.in_stock?"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700":"bg-gradient-to-r from-red-100 to-rose-100 text-red-700"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${t.in_stock?"bg-emerald-500":"bg-red-500"}`}),t.in_stock?"Active":"Inactive"]})}),e.jsx("td",{className:"px-5 py-4",children:e.jsxs("div",{className:"flex justify-end items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(S,{to:`/admin/products/${t.id}`,className:"p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-all",title:"View",children:e.jsx(Se,{size:18})}),e.jsx(S,{to:`/admin/products/edit/${t.id}`,className:"p-2.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-xl transition-all",title:"Edit",children:e.jsx(Fe,{size:18})}),e.jsx("button",{onClick:()=>s(t.id,t.name),disabled:a===t.id,className:"p-2.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50",title:"Delete",children:a===t.id?e.jsx(V,{size:18,className:"animate-spin"}):e.jsx(Ue,{size:18})})]})})]}),Vt=({product:t,onDelete:s,onToggleStock:r,deleteLoading:a,toggleLoading:o})=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-100 to-gray-50 p-4 flex items-center justify-center relative",children:[e.jsx(Ge,{imageUrl:t.image,productName:t.name,size:"lg"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold shadow-sm
          ${t.in_stock?"bg-emerald-500 text-white":"bg-red-500 text-white"}`,children:t.in_stock?"In Stock":"Out of Stock"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("span",{className:"text-xs font-mono text-gray-400 bg-gray-100 px-2 py-0.5 rounded",children:["#",Ze(t.id)]}),e.jsx("h3",{className:"font-bold text-gray-800 mt-2 line-clamp-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2 h-8",children:t.description||"No description"}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsx("span",{className:"text-xl font-bold text-emerald-600",children:Qe(t.price)}),e.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:t.category})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>r(t.id,t.in_stock),disabled:o===t.id,className:"flex-1 py-2 text-sm font-medium rounded-xl transition-colors flex items-center justify-center gap-1.5\r\n            ${product.in_stock ? 'bg-emerald-50 text-emerald-600 hover:bg-emerald-100' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}",children:[o===t.id?e.jsx(V,{size:14,className:"animate-spin"}):t.in_stock?e.jsx(Ie,{size:16}):e.jsx(Re,{size:16}),"Toggle"]}),e.jsx(S,{to:`/admin/products/edit/${t.id}`,className:"p-2 text-blue-500 hover:bg-blue-50 rounded-xl transition-colors",children:e.jsx(Fe,{size:16})}),e.jsx("button",{onClick:()=>s(t.id,t.name),disabled:a===t.id,className:"p-2 text-red-500 hover:bg-red-50 rounded-xl transition-colors disabled:opacity-50",children:a===t.id?e.jsx(V,{size:16,className:"animate-spin"}):e.jsx(Ue,{size:16})})]})]})]}),_s=()=>{const[t,s]=m.useState([]),[r,a]=m.useState([]),[o,l]=m.useState(!0),[n,d]=m.useState(null),[h,y]=m.useState(null),[b,x]=m.useState(""),[p,g]=m.useState(1),[w,T]=m.useState("All"),[$,j]=m.useState(null),[c,_]=m.useState(null),[O,u]=m.useState(!1),[A,i]=m.useState("list"),[C,P]=m.useState("name"),[E,z]=m.useState("asc"),M=async()=>{try{l(!0),d(null);const[f,v]=await Promise.all([Ve(),Ye()]);s(f),a(v)}catch(f){console.error("Error fetching data:",f),d("Failed to load products. Please try again.")}finally{l(!1)}};m.useEffect(()=>{M()},[]);const D=f=>{C===f?z(E==="asc"?"desc":"asc"):(P(f),z("asc"))},Ce=async(f,v)=>{if(confirm(`Are you sure you want to delete "${v}"? This action cannot be undone.`))try{j(f),d(null),await zt(f)?(s(L=>L.filter(H=>H.id!==f)),y(`"${v}" has been deleted successfully.`),setTimeout(()=>y(null),3e3)):d("Failed to delete product. Please try again.")}catch(k){console.error("Error deleting product:",k),d("An error occurred while deleting the product.")}finally{j(null)}},ke=async(f,v)=>{try{_(f),d(null),await $t(f,{in_stock:!v})?(s(H=>H.map(de=>de.id===f?{...de,in_stock:!v}:de)),y(`Stock status updated to "${v?"Out of Stock":"In Stock"}"`),setTimeout(()=>y(null),2e3)):d("Failed to update stock status. Please try again.")}catch(k){console.error("Error toggling stock:",k),d("Failed to update stock status. Please try again.")}finally{_(null)}},Y=m.useMemo(()=>{let f=t.filter(v=>{const k=b.toLowerCase(),L=v.name.toLowerCase().includes(k)||v.id&&v.id.toLowerCase().includes(k)||v.description&&v.description.toLowerCase().includes(k),H=w==="All"||v.category===w;return L&&H});return f.sort((v,k)=>{let L=0;switch(C){case"name":L=v.name.localeCompare(k.name);break;case"price":L=v.price-k.price;break;case"category":L=(v.category||"").localeCompare(k.category||"");break;case"in_stock":L=v.in_stock===k.in_stock?0:v.in_stock?-1:1;break;case"created_at":L=new Date(v.created_at||0).getTime()-new Date(k.created_at||0).getTime();break}return E==="asc"?L:-L}),f},[t,b,w,C,E]),U=m.useMemo(()=>({total:t.length,inStock:t.filter(f=>f.in_stock).length,outOfStock:t.filter(f=>!f.in_stock).length}),[t]),F=Math.ceil(Y.length/me),ie=p*me,Ee=ie-me,Oe=Y.slice(Ee,ie);m.useEffect(()=>{g(1)},[b,w]);const Xe=m.useMemo(()=>["All",...new Set(t.map(f=>f.category).filter(Boolean))],[t]);return e.jsxs(ne,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage your product inventory and catalog"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:M,className:"p-3 text-gray-600 bg-white rounded-xl hover:bg-gray-50 transition-colors shadow-sm border border-gray-200",title:"Refresh",children:e.jsx(oe,{size:20})}),e.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center px-5 py-3 bg-white text-gray-700 rounded-xl hover:bg-gray-50 transition-all shadow-sm border border-gray-200 font-semibold",children:[e.jsx(Me,{size:18,className:"mr-2 text-amber-500"}),"Quick Add"]}),e.jsxs(S,{to:"/admin/products/add",className:"inline-flex items-center px-5 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl hover:from-emerald-600 hover:to-teal-600 transition-all shadow-lg hover:shadow-xl font-semibold",children:[e.jsx(je,{size:18,className:"mr-2"}),"Add Product"]})]})]}),n&&e.jsx(Rt,{message:n,onDismiss:()=>d(null)}),h&&e.jsx(Ft,{message:h,onDismiss:()=>y(null)}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[e.jsx(xe,{icon:B,gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",label:"Total Products",value:U.total,trend:"+12%"}),e.jsx(xe,{icon:mt,gradient:"bg-gradient-to-br from-emerald-500 to-teal-600",label:"In Stock",value:U.inStock,subtitle:`${(U.inStock/(U.total||1)*100).toFixed(0)}% of catalog`}),e.jsx(xe,{icon:xt,gradient:"bg-gradient-to-br from-red-500 to-rose-600",label:"Out of Stock",value:U.outOfStock,subtitle:U.outOfStock>0?"Needs attention":"All stocked up!"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ae,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name, ID, or description...",value:b,onChange:f=>x(f.target.value),className:"w-full pl-12 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors text-gray-800"}),b&&e.jsx("button",{onClick:()=>x(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(R,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:18,className:"text-gray-400"}),e.jsx("select",{value:w,onChange:f=>T(f.target.value),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-emerald-500 focus:ring-0 transition-colors min-w-[160px] text-gray-700",children:Xe.map(f=>e.jsx("option",{value:f,children:f},f))})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>i("list"),className:`p-2.5 rounded-lg transition-all ${A==="list"?"bg-white shadow-sm text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(gt,{size:20})}),e.jsx("button",{onClick:()=>i("grid"),className:`p-2.5 rounded-lg transition-all ${A==="grid"?"bg-white shadow-sm text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(ht,{size:20})})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[o?e.jsx(Ut,{}):Y.length===0?e.jsx(qt,{searchTerm:b,selectedCategory:w}):A==="list"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{className:"text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:[e.jsx("th",{className:"px-5 py-4",children:"ID"}),e.jsx(X,{label:"Product",field:"name",currentSort:C,direction:E,onSort:D}),e.jsx(X,{label:"Category",field:"category",currentSort:C,direction:E,onSort:D}),e.jsx(X,{label:"Price",field:"price",currentSort:C,direction:E,onSort:D}),e.jsx(X,{label:"Stock",field:"in_stock",currentSort:C,direction:E,onSort:D}),e.jsx("th",{className:"px-5 py-4",children:"Status"}),e.jsx("th",{className:"px-5 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:Oe.map(f=>e.jsx(Jt,{product:f,onDelete:Ce,onToggleStock:ke,deleteLoading:$,toggleLoading:c},f.id))})]})}):e.jsx("div",{className:"p-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:Oe.map(f=>e.jsx(Vt,{product:f,onDelete:Ce,onToggleStock:ke,deleteLoading:$,toggleLoading:c},f.id))}),F>1&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Ee+1})," ","to"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Math.min(ie,Y.length)})," ","of"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Y.length})," ","products"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>g(f=>Math.max(f-1,1)),disabled:p===1,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(Ne,{size:20})}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(F,5)},(f,v)=>{let k;return F<=5||p<=3?k=v+1:p>=F-2?k=F-4+v:k=p-2+v,e.jsx("button",{onClick:()=>g(k),className:`w-10 h-10 rounded-xl font-semibold transition-all
                          ${p===k?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:k},k)})}),e.jsx("button",{onClick:()=>g(f=>Math.min(f+1,F)),disabled:p===F,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(ve,{size:20})})]})]})]})]}),e.jsx(Bt,{isOpen:O,onClose:()=>u(!1),categories:r,onProductAdded:()=>{M(),y("Product added successfully!"),setTimeout(()=>y(null),3e3)}})]})},ge=10,We=["placed","confirmed","shipped","delivered","cancelled"],q=({icon:t,gradient:s,label:r,value:a,subtitle:o})=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl ${s} p-5 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:e.jsx(t,{className:"w-6 h-6"})})}),e.jsx("p",{className:"text-white/80 text-sm font-medium",children:r}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a}),o&&e.jsx("p",{className:"text-white/60 text-xs mt-1",children:o})]})]}),Yt=t=>{switch(t){case"delivered":return"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700";case"placed":return"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-700";case"confirmed":return"bg-gradient-to-r from-amber-100 to-orange-100 text-amber-700";case"shipped":return"bg-gradient-to-r from-violet-100 to-purple-100 text-violet-700";case"cancelled":return"bg-gradient-to-r from-red-100 to-rose-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Ht=t=>{switch(t){case"paid":return"bg-emerald-100 text-emerald-700";case"pending":return"bg-amber-100 text-amber-700";case"failed":case"refunded":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},Zt=({message:t,onDismiss:s})=>e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-rose-500 text-white px-5 py-4 rounded-xl mb-6 flex items-center shadow-lg",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("span",{className:"flex-1 font-medium",children:t}),e.jsx("button",{onClick:s,className:"ml-4 p-2 hover:bg-white/20 rounded-lg transition-colors",children:e.jsx(R,{size:18})})]}),Qt=()=>e.jsxs("div",{className:"p-16 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-blue-500 rounded-full animate-spin border-t-transparent"})]}),e.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Loading orders..."})]}),Gt=({searchTerm:t})=>e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsx(J,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-500",children:t?"Try a different search term.":"Orders will appear here when customers make purchases."})]}),Wt=({order:t,isUpdating:s,onStatusChange:r})=>e.jsxs("div",{className:"relative inline-flex items-center group",children:[e.jsx("select",{value:t.order_status,onChange:a=>r(t.id,a.target.value),disabled:s,className:`appearance-none inline-flex items-center pl-3 pr-8 py-2 rounded-xl text-xs font-semibold cursor-pointer transition-all disabled:cursor-not-allowed ${Yt(t.order_status)}`,children:We.map(a=>e.jsx("option",{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:s?e.jsx(V,{size:14,className:"animate-spin"}):e.jsx(Te,{size:14,className:"opacity-60"})})]}),Xt=t=>t.substring(0,8),Kt=t=>new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),De=t=>t.charAt(0).toUpperCase()+t.slice(1),Cs=()=>{const[t,s]=m.useState([]),[r,a]=m.useState(!0),[o,l]=m.useState(null),[n,d]=m.useState(""),[h,y]=m.useState(1),[b,x]=m.useState("All"),[p,g]=m.useState(null),w=async()=>{try{a(!0),l(null);const i=await He();s(i)}catch(i){l("Failed to load orders. Please try again."),console.error("Error fetching orders:",i)}finally{a(!1)}};m.useEffect(()=>{w()},[]);const T=async(i,C)=>{try{g(i),l(null),await At(i,C)?s(E=>E.map(z=>z.id===i?{...z,order_status:C}:z)):l("Failed to update order status.")}catch(P){l(`Failed to update status: ${P?.message||"Unknown error"}`)}finally{g(null)}},$=m.useMemo(()=>({total:t.length,placed:t.filter(i=>i.order_status==="placed").length,confirmed:t.filter(i=>i.order_status==="confirmed").length,shipped:t.filter(i=>i.order_status==="shipped").length,delivered:t.filter(i=>i.order_status==="delivered").length,cancelled:t.filter(i=>i.order_status==="cancelled").length,totalRevenue:t.filter(i=>i.order_status!=="cancelled").reduce((i,C)=>i+(C.order_total||0),0)}),[t]),j=m.useMemo(()=>t.filter(i=>{const C=i.id.toLowerCase().includes(n.toLowerCase())||i.customer_name.toLowerCase().includes(n.toLowerCase())||(i.customer_email?.toLowerCase().includes(n.toLowerCase())??!1),P=b==="All"||i.order_status===b;return C&&P}),[t,n,b]),c=m.useMemo(()=>["All",...We],[]),_=Math.ceil(j.length/ge),O=h*ge,u=O-ge,A=j.slice(u,O);return m.useEffect(()=>{y(1)},[n,b]),e.jsx(ne,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage and track customer orders"})]}),e.jsxs("button",{onClick:w,className:"inline-flex items-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors shadow-sm font-medium",children:[e.jsx(oe,{size:18,className:"mr-2"}),"Refresh"]})]}),o&&e.jsx(Zt,{message:o,onDismiss:()=>l(null)}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(q,{icon:J,gradient:"bg-gradient-to-br from-gray-700 to-gray-900",label:"Total Orders",value:$.total}),e.jsx(q,{icon:ee,gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",label:"Placed",value:$.placed}),e.jsx(q,{icon:B,gradient:"bg-gradient-to-br from-amber-500 to-orange-600",label:"Confirmed",value:$.confirmed}),e.jsx(q,{icon:se,gradient:"bg-gradient-to-br from-violet-500 to-purple-600",label:"Shipped",value:$.shipped}),e.jsx(q,{icon:ue,gradient:"bg-gradient-to-br from-emerald-500 to-teal-600",label:"Delivered",value:$.delivered}),e.jsx(q,{icon:pe,gradient:"bg-gradient-to-br from-red-500 to-rose-600",label:"Cancelled",value:$.cancelled})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ae,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by order ID, customer name or email...",value:n,onChange:i=>d(i.target.value),className:"w-full pl-12 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition-colors text-gray-800"}),n&&e.jsx("button",{onClick:()=>d(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(R,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:18,className:"text-gray-400"}),e.jsx("select",{value:b,onChange:i=>x(i.target.value),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-blue-500 focus:ring-0 transition-colors min-w-[140px] text-gray-700",children:c.map(i=>e.jsx("option",{value:i,children:De(i)},i))})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[r?e.jsx(Qt,{}):j.length===0?e.jsx(Gt,{searchTerm:n}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{className:"text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Order ID"}),e.jsx("th",{className:"px-6 py-4",children:"Customer"}),e.jsx("th",{className:"px-6 py-4",children:"Date"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4",children:"Items"}),e.jsx("th",{className:"px-6 py-4",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Payment"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:A.map(i=>e.jsxs("tr",{className:"group hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50/30 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-xs font-mono text-gray-400 bg-gray-100 px-2 py-1 rounded-lg",children:["#",Xt(i.id)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:i.customer_name}),i.customer_email&&e.jsx("p",{className:"text-xs text-gray-500",children:i.customer_email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qe,{size:14,className:"text-gray-400"}),Kt(i.created_at)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Wt,{order:i,isUpdating:p===i.id,onStatusChange:T})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg bg-gray-100 text-gray-700 text-sm font-medium",children:[i.items_count||0," items"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["â‚¹",i.order_total?.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-lg text-xs font-semibold ${Ht(i.payment_status)}`,children:[e.jsx(jt,{size:12}),De(i.payment_status)]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.payment_method})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{to:`/admin/orders/${i.id}`,className:"p-2.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"View Details",children:e.jsx(Se,{size:18})})})})]},i.id))})]})}),_>1&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-800",children:u+1})," to"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Math.min(O,j.length)})," of"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:j.length})," orders"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(i=>Math.max(i-1,1)),disabled:h===1,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(Ne,{size:20})}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(_,5)},(i,C)=>{let P;return _<=5||h<=3?P=C+1:h>=_-2?P=_-4+C:P=h-2+C,e.jsx("button",{onClick:()=>y(P),className:`w-10 h-10 rounded-xl font-semibold transition-all
                          ${h===P?"bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow-lg":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:P},P)})}),e.jsx("button",{onClick:()=>y(i=>Math.min(i+1,_)),disabled:h===_,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(ve,{size:20})})]})]})]})]})})},he=10,K=({icon:t,gradient:s,label:r,value:a,subtitle:o})=>e.jsxs("div",{className:`relative overflow-hidden rounded-2xl ${s} p-5 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1`,children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white/10 rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center mb-3",children:e.jsx(t,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-white/80 text-sm font-medium",children:r}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:a}),o&&e.jsx("p",{className:"text-white/60 text-xs mt-1",children:o})]})]}),es=()=>e.jsxs("div",{className:"p-16 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 rounded-full"}),e.jsx("div",{className:"absolute top-0 left-0 w-16 h-16 border-4 border-purple-500 rounded-full animate-spin border-t-transparent"})]}),e.jsx("p",{className:"mt-4 text-gray-500 font-medium",children:"Loading customers..."})]}),ts=({searchTerm:t})=>e.jsxs("div",{className:"p-16 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-3xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsx(re,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No customers found"}),e.jsx("p",{className:"text-gray-500",children:t?"Try a different search term.":"Customers will appear here when they make purchases."})]}),ks=()=>{const[t,s]=m.useState([]),[r,a]=m.useState(!0),[o,l]=m.useState(""),[n,d]=m.useState(1),[h,y]=m.useState("All"),b=async()=>{try{a(!0);const c=await Dt();s(c)}catch(c){console.error("Error fetching customers:",c)}finally{a(!1)}};m.useEffect(()=>{b()},[]);const x=m.useMemo(()=>({total:t.length,active:t.filter(c=>c.status==="Active").length,totalOrders:t.reduce((c,_)=>c+_.orders_count,0),totalRevenue:t.reduce((c,_)=>c+_.total_spent,0)}),[t]),p=m.useMemo(()=>t.filter(c=>{const _=c.name.toLowerCase().includes(o.toLowerCase())||(c.email?.toLowerCase().includes(o.toLowerCase())??!1)||(c.phone?.includes(o)??!1)||c.id.toLowerCase().includes(o.toLowerCase()),O=h==="All"||c.status===h;return _&&O}),[t,o,h]),g=Math.ceil(p.length/he),w=n*he,T=w-he,$=p.slice(T,w);m.useEffect(()=>{d(1)},[o,h]);const j=["All","Active","Inactive"];return e.jsx(ne,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"View and manage your customer database"})]}),e.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2.5 bg-white border border-gray-200 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors shadow-sm font-medium",children:[e.jsx(oe,{size:18,className:"mr-2"}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:[e.jsx(K,{icon:re,gradient:"bg-gradient-to-br from-violet-500 to-purple-600",label:"Total Customers",value:x.total}),e.jsx(K,{icon:Pe,gradient:"bg-gradient-to-br from-emerald-500 to-teal-600",label:"Active Customers",value:x.active,subtitle:`${x.total>0?Math.round(x.active/x.total*100):0}% of total`}),e.jsx(K,{icon:J,gradient:"bg-gradient-to-br from-blue-500 to-indigo-600",label:"Total Orders",value:x.totalOrders}),e.jsx(K,{icon:fe,gradient:"bg-gradient-to-br from-amber-500 to-orange-600",label:"Total Revenue",value:`â‚¹${x.totalRevenue.toLocaleString()}`})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-5",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ae,{size:20,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, phone, or ID...",value:o,onChange:c=>l(c.target.value),className:"w-full pl-12 pr-12 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-0 transition-colors text-gray-800"}),o&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(R,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{size:18,className:"text-gray-400"}),e.jsx("select",{value:h,onChange:c=>y(c.target.value),className:"px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-purple-500 focus:ring-0 transition-colors min-w-[140px] text-gray-700",children:j.map(c=>e.jsx("option",{value:c,children:c},c))})]})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[r?e.jsx(es,{}):p.length===0?e.jsx(ts,{searchTerm:o}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{className:"text-left text-xs font-bold text-gray-500 uppercase tracking-wider",children:[e.jsx("th",{className:"px-6 py-4",children:"Customer"}),e.jsx("th",{className:"px-6 py-4",children:"Contact"}),e.jsx("th",{className:"px-6 py-4",children:"Location"}),e.jsx("th",{className:"px-6 py-4",children:"Joined"}),e.jsx("th",{className:"px-6 py-4",children:"Orders"}),e.jsx("th",{className:"px-6 py-4",children:"Total Spent"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:$.map(c=>e.jsxs("tr",{className:"group hover:bg-gradient-to-r hover:from-gray-50 hover:to-purple-50/30 transition-all duration-200",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-violet-400 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-white font-bold",children:c.name.split(" ").map(_=>_[0]).join("").toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800 group-hover:text-purple-600 transition-colors",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-400 font-mono",children:["#",c.id.substring(0,8)]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[c.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(wt,{size:14,className:"text-gray-400"}),e.jsx("span",{children:c.email})]}),c.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Nt,{size:14,className:"text-gray-400"}),e.jsx("span",{children:c.phone})]})]})}),e.jsx("td",{className:"px-6 py-4",children:c.location?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(vt,{size:14,className:"text-gray-400"}),e.jsx("span",{children:c.location})]}):e.jsx("span",{className:"text-gray-400 italic text-sm",children:"Not available"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(qe,{size:14,className:"text-gray-400"}),e.jsx("span",{children:new Date(c.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 rounded-xl bg-blue-100 text-blue-700 text-sm font-semibold",children:[c.orders_count," orders"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:["â‚¹",c.total_spent.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-xs font-semibold
                          ${c.status==="Active"?"bg-gradient-to-r from-emerald-100 to-teal-100 text-emerald-700":"bg-gray-100 text-gray-600"}`,children:[c.status==="Active"?e.jsx(Pe,{size:14}):e.jsx(St,{size:14}),c.status]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"p-2.5 text-purple-500 hover:text-purple-700 hover:bg-purple-50 rounded-xl transition-all opacity-0 group-hover:opacity-100",title:"View Details",children:e.jsx(Se,{size:18})})})})]},c.id))})]})}),g>1&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-semibold text-gray-800",children:T+1})," to"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:Math.min(w,p.length)})," of"," ",e.jsx("span",{className:"font-semibold text-gray-800",children:p.length})," customers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>d(c=>Math.max(c-1,1)),disabled:n===1,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(Ne,{size:20})}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(g,5)},(c,_)=>{let O;return g<=5||n<=3?O=_+1:n>=g-2?O=g-4+_:O=n-2+_,e.jsx("button",{onClick:()=>d(O),className:`w-10 h-10 rounded-xl font-semibold transition-all
                          ${n===O?"bg-gradient-to-r from-violet-500 to-purple-500 text-white shadow-lg":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:O},O)})}),e.jsx("button",{onClick:()=>d(c=>Math.min(c+1,g)),disabled:n===g,className:"p-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:e.jsx(ve,{size:20})})]})]})]})]})})};export{ne as A,Dt as B,Ss as C,ks as D,Cs as O,_s as P,is as a,ns as b,hs as c,I as d,os as e,Ye as f,cs as g,ls as h,us as i,e as j,bs as k,ms as l,ps as m,xs as n,gs as o,ys as p,js as q,ws as r,N as s,Pt as t,fs as u,ds as v,vs as w,Ns as x,He as y,Ve as z};
